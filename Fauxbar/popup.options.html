<html>
<head>
	<link href="fauxbar.css" media="screen" rel="stylesheet" type="text/css" />
	<style type="text/css">
		a:link { color:#06c; font-size:13px; font-weight:bold; }
		body { white-space:nowrap; padding:5px 7px 15px 7px; }
		img { float:left; margin-right:12px; }
	</style>
	<script type="text/javascript" src="jquery-1.6.2.min.js"></script>
	<script type="text/javascript">
	<!--
		// http://phpjs.org/functions/strstr:551
		function strstr (haystack, needle, bool) {
			var pos = 0;
			haystack += '';
			pos = haystack.indexOf(needle);
			if (pos == -1) {
				return false;
			} else {
				if (bool) {
					return haystack.substr(0, pos);
				} else {
					return haystack.slice(pos);
				}
			}
		}

		if (navigator.appVersion.indexOf("Mac")!=-1) {
			$(document).ready(function(){
				$("head").append('<link href="fauxbar-mac.css" media="screen" rel="stylesheet" type="text/css" />');
			});
		}

		function editPageTiles() {
			chrome.tabs.getSelected(null, function(tab){
				chrome.extension.sendRequest({action:"editPageTiles", tabId:tab.id});
				window.close();
			});
		}

		function openOptions() {
			chrome.tabs.getAllInWindow(null, function(tabs){
				for (var t in tabs) {
					if (tabs[t].title == "Fauxbar: Options" && strstr(tabs[t].url, "fauxbar.html")) {
						chrome.tabs.update(tabs[t].id, {selected:true});
						return;
					}
				}
				//chrome.tabs.create({url:"fauxbar.html#options=1"});
				chrome.tabs.getSelected(null, function(tab){
					chrome.tabs.update(tab.id, {url:"fauxbar.html#options=1"}, function(tab){
						chrome.extension.sendRequest({action:"openOptions", tabId:tab.id});
					});
				});
			});
		}
	-->
	</script>
</head>
<body>
<img src="fauxbar48.png" />
<a href="#" onclick="openOptions(); return false" style="position:relative; top:3px;">Open Fauxbar's Options</a><br />
<a href="#" onclick="editPageTiles(); return false" style="position:relative; top:7px;">Edit Site Tiles</a>
</body>
</html>